{"remainingRequest":"/Users/t.j/Desktop/Projet7/P7-Groupomania-master/Frontend/node_modules/babel-loader/lib/index.js!/Users/t.j/Desktop/Projet7/P7-Groupomania-master/Frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/t.j/Desktop/Projet7/P7-Groupomania-master/Frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/t.j/Desktop/Projet7/P7-Groupomania-master/Frontend/src/views/Connexion.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/t.j/Desktop/Projet7/P7-Groupomania-master/Frontend/src/views/Connexion.vue","mtime":1610031143000},{"path":"/Users/t.j/Desktop/Projet7/P7-Groupomania-master/Frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635943526508},{"path":"/Users/t.j/Desktop/Projet7/P7-Groupomania-master/Frontend/node_modules/babel-loader/lib/index.js","mtime":1635943529871},{"path":"/Users/t.j/Desktop/Projet7/P7-Groupomania-master/Frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635943526508},{"path":"/Users/t.j/Desktop/Projet7/P7-Groupomania-master/Frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1635943530684}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHJvdXRlciBmcm9tICIuLi9yb3V0ZXIiOwppbXBvcnQgIi4uL21haW4uY3NzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBY2N1ZWlsIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaW5wdXRFbWFpbDogIiIsCiAgICAgIGlucHV0UGFzc3dvcmQ6ICIiLAogICAgICBpc0ludmFsaWQ6IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlU3VibWl0OiBmdW5jdGlvbiBoYW5kbGVTdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuaW5wdXRFbWFpbCB8fCAhdGhpcy5pbnB1dFBhc3N3b3JkKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuaXNJbnZhbGlkID0gdHJ1ZTsKICAgICAgfQoKICAgICAgYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hdXRoL2xvZ2luIiwgewogICAgICAgIGVtYWlsOiB0aGlzLmlucHV0RW1haWwsCiAgICAgICAgcGFzc3dvcmQ6IHRoaXMuaW5wdXRQYXNzd29yZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidG9rZW4iLCByZXMuZGF0YS50b2tlbik7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXJJZCIsIHJlcy5kYXRhLnVzZXJJZCk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXJOYW1lIiwgcmVzLmRhdGEudXNlck5hbWUpOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJyb2xlIiwgcmVzLmRhdGEucm9sZSk7CiAgICAgICAgd2luZG93LmFsZXJ0KCdjb25uZXhpb24gcsOpdXNzaWUsIHJlZGlyZWN0aW9uIHZlcnMgbGEgcGFnZSBwcmluY2lwYWxlJyk7CiAgICAgICAgcm91dGVyLnB1c2goewogICAgICAgICAgcGF0aDogJ1N0cmVhbScKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgX3RoaXMuaXNJbnZhbGlkID0gdHJ1ZTsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/t.j/Desktop/Projet7/P7-Groupomania-master/Frontend/src/views/Connexion.vue"],"names":[],"mappings":"AA8BA,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,MAAP,MAAmB,WAAnB;AACA,OAAO,aAAP;AAEA,eAAe;AACX,EAAA,IAAI,EAAE,SADK;AAEX,EAAA,IAFW,kBAEJ;AACH,WAAO;AACH,MAAA,UAAU,EAAE,EADT;AAEH,MAAA,aAAa,EAAE,EAFZ;AAGH,MAAA,SAAS,EAAE;AAHR,KAAP;AAKH,GARU;AASX,EAAA,OAAO,EAAE;AACL,IAAA,YADK,0BACU;AAAA;;AAEX,UAAK,CAAC,KAAK,UAAN,IAAoB,CAAC,KAAK,aAA/B,EAA+C;AACvC,eAAO,KAAK,SAAL,GAAiB,IAAxB;AACJ;;AAEJ,MAAA,KAAK,CAAC,IAAN,CAAW,sCAAX,EAAmD;AAC/C,QAAA,KAAI,EAAQ,KAAK,UAD8B;AAE/C,QAAA,QAAQ,EAAI,KAAK;AAF8B,OAAnD,EAIC,IAJD,CAIM,UAAU,GAAV,EAAe;AACjB,QAAA,YAAY,CAAC,OAAb,CAAqB,OAArB,EAAgC,GAAG,CAAC,IAAJ,CAAS,KAAzC;AACA,QAAA,YAAY,CAAC,OAAb,CAAqB,QAArB,EAAgC,GAAG,CAAC,IAAJ,CAAS,MAAzC;AACA,QAAA,YAAY,CAAC,OAAb,CAAqB,UAArB,EAAgC,GAAG,CAAC,IAAJ,CAAS,QAAzC;AACA,QAAA,YAAY,CAAC,OAAb,CAAqB,MAArB,EAAgC,GAAG,CAAC,IAAJ,CAAS,IAAzC;AACA,QAAA,MAAM,CAAC,KAAP,CAAa,wDAAb;AACA,QAAA,MAAM,CAAC,IAAP,CAAY;AAAE,UAAA,IAAG,EAAI;AAAT,SAAZ;AACH,OAXD,EAYC,KAZD,CAYO,UAAC,KAAD,EAAW;AACd,QAAA,KAAI,CAAC,SAAL,GAAiB,IAAjB;AACA,QAAA,OAAO,CAAC,GAAR,CAAY,KAAZ;AACH,OAfD;AAgBJ;AAvBK;AATE,CAAf","sourcesContent":["<template>\n    <main class=\"container\">\n         <!-- une seule section contenant le module de connexion -->\n        <section class=\"col-12 col-md-8 mt-5 mx-auto p-3 bg-light rounded\">  \n            <form @submit.prevent=\"handleSubmit\">\n                <p class=\"text-center\"><img  src=\"../assets/login.svg\" alt=\"login_svg\" style=\"width:10rem\" /></p>\n                <h1 class=\"text-center font-weight-bold\" style=\"font-size:4vw;\">CONNEXION</h1>\n                <div class=\"form-group mt-3\">\n                    <label for=\"inputEmail\">Email:</label>\n                    <input v-on:keydown=\"isInvalid = false\" v-model=\"inputEmail\" type=\"email\" class=\"form-control\" id=\"inputEmail\" aria-describedby=\"emailHelp\" placeholder=\"votre email\">    \n                    <span id=\"emailHelp\" class=\"form-text font-italic\">Contactez-nous en cas d'oubli</span>\n                </div>\n                <div class=\"form-group mt-3\">\n                    <label for=\"inputPassword\">Mot de passe:</label>\n                    <input v-on:keydown=\"isInvalid = false\" v-model=\"inputPassword\" type=\"password\" class=\"form-control\" id=\"inputPassword\" aria-describedby=\"passwordHelp\" placeholder=\"votre mot de passe\">                        \n                    <span id=\"passwordHelp\" class=\"form-text font-italic\">Contactez-nous en cas d'oubli</span>\n                </div>\n                <button type=\"submit\" class=\"btn btn-primary mt-5 w-100 shadow contrastBoutonVert font-weight-bold\">SE CONNECTER</button>\n            </form>\n        </section>\n        <div v-show=\"isInvalid\" class=\"invalidBox m-3\" key=\"invalid\">\n            Veuillez vérifier vos informations de connexion.\n        </div>  \n        <div class=' col-7 mx-auto mt-3'>\n            <router-link to=\"/inscription\"><button  class=' text-white p-2 w-100 border-0 rounded shadow contrastBoutonNoir font-weight-bold'>INSCRIPTION</button></router-link>\n        </div>\n    </main>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport router from \"../router\";\nimport \"../main.css\";\n\nexport default {\n    name: \"Accueil\",\n    data() {\n        return {\n            inputEmail: \"\",\n            inputPassword: \"\",\n            isInvalid: false\n        }\n    },\n    methods: {\n        handleSubmit() {\n\n            if ( !this.inputEmail || !this.inputPassword ) {\n                    return this.isInvalid = true;\n                }\n\n            axios.post(\"http://localhost:3000/api/auth/login\", { \n                email :     this.inputEmail,\n                password:   this.inputPassword\n             })\n            .then(function (res) {\n                localStorage.setItem(\"token\",   res.data.token)\n                localStorage.setItem(\"userId\",  res.data.userId)\n                localStorage.setItem(\"userName\",res.data.userName)\n                localStorage.setItem(\"role\",    res.data.role)\n                window.alert('connexion réussie, redirection vers la page principale');\n                router.push({ path : 'Stream'});\n            })\n            .catch((error) => {\n                this.isInvalid = true;\n                console.log(error);\n            })         \n        }\n    }\n}    \n</script>"],"sourceRoot":""}]}