{"remainingRequest":"/Users/t.j/OPCR/Projet7/Frontend/node_modules/babel-loader/lib/index.js!/Users/t.j/OPCR/Projet7/Frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/t.j/OPCR/Projet7/Frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/t.j/OPCR/Projet7/Frontend/src/views/Compte.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/t.j/OPCR/Projet7/Frontend/src/views/Compte.vue","mtime":1610031143000},{"path":"/Users/t.j/OPCR/Projet7/Frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635943526508},{"path":"/Users/t.j/OPCR/Projet7/Frontend/node_modules/babel-loader/lib/index.js","mtime":1635943529871},{"path":"/Users/t.j/OPCR/Projet7/Frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635943526508},{"path":"/Users/t.j/OPCR/Projet7/Frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1635943530684}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7CmltcG9ydCBIb21lIGZyb20gIi4uL2NvbXBvbmVudHMvSG9tZSI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi4vcm91dGVyIjsKaW1wb3J0ICIuLi9tYWluLmNzcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ29tcHRlIiwKICBjb21wb25lbnRzOiB7CiAgICBIb21lOiBIb21lCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNBZG1pbjogZmFsc2UsCiAgICAgIG5hbWVDdXJyZW50VXNlcjogIiIsCiAgICAgIGNyZWF0aW9uOiAiIiwKICAgICAgaWQ6ICIiCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBpZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySWQnKTsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIGF4aW9zLmdldCgiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS91c2Vycy8iICsgaWQsIHsKICAgICAgaGVhZGVyczogewogICAgICAgICJBdXRob3JpemF0aW9uIjogIkJlYXJlciAiICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIikKICAgICAgfQogICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIHNlbGYuY3JlYXRpb24gPSByZXMuZGF0YS5jcmVhdGVkQXQuc2xpY2UoMCwgMTApLnNwbGl0KCItIikucmV2ZXJzZSgpLmpvaW4oIi4iKTsKICAgICAgc2VsZi5pc0FkbWluID0gcmVzLmRhdGEuaXNBZG1pbjsKICAgICAgc2VsZi5uYW1lQ3VycmVudFVzZXIgPSByZXMuZGF0YS51c2VyTmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHJlcy5kYXRhLnVzZXJOYW1lLnNsaWNlKDEpOwogICAgICBzZWxmLmlkID0gcmVzLmRhdGEuaWQ7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2NhbENsZWFyOiBmdW5jdGlvbiBsb2NhbENsZWFyKCkgewogICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTsKICAgICAgcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICIvIgogICAgICB9KTsKICAgIH0sCiAgICBkZWxldGVNeUFjY291bnQ6IGZ1bmN0aW9uIGRlbGV0ZU15QWNjb3VudChuKSB7CiAgICAgIHZhciBpZCA9IG47CiAgICAgIHZhciBjb25maXJtVXNlckRlbGV0aW9uID0gY29uZmlybSgidm91bGV6LXZvdXMgdnJhaW1lbnQgc3VwcHJpbWVyIHZvdHJlIGNvbXB0ZSA/Iik7CgogICAgICBpZiAoY29uZmlybVVzZXJEZWxldGlvbiA9PSB0cnVlKSB7CiAgICAgICAgYXhpb3MuZGVsZXRlKCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3VzZXJzLyIgKyBpZCwgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAiQXV0aG9yaXphdGlvbiI6ICJCZWFyZXIgIiArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgYWxlcnQoJ0NsaXF1ZXogc3VyIG9rIGV0IGxcJ3V0aWxpc2F0ZXVyIHNlcmEgc3VwcHJpbcOpJyk7CiAgICAgICAgICByb3V0ZXIucmVwbGFjZSgiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaS8iKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgIH0sCiAgICB0b0NvbW1lbnRzTGlzdDogZnVuY3Rpb24gdG9Db21tZW50c0xpc3QoKSB7CiAgICAgIHJvdXRlci5yZXBsYWNlKCJodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL0NvbW1lbnRzTGlzdCIpOwogICAgfSwKICAgIHRvVXNlcnNMaXN0OiBmdW5jdGlvbiB0b1VzZXJzTGlzdCgpIHsKICAgICAgcm91dGVyLnJlcGxhY2UoImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvVXNlcnNMaXN0Iik7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/t.j/OPCR/Projet7/Frontend/src/views/Compte.vue"],"names":[],"mappings":";;;;;AAwCA,OAAO,IAAP,MAAiB,oBAAjB;AACA,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,MAAP,MAAmB,WAAnB;AACA,OAAO,aAAP;AAEA,eAAe;AACX,EAAA,IAAI,EAAE,QADK;AAEX,EAAA,UAAU,EAAE;AACV,IAAA,IAAG,EAAH;AADU,GAFD;AAKX,EAAA,IALW,kBAKJ;AACH,WAAO;AACH,MAAA,OAAO,EAAE,KADN;AAEH,MAAA,eAAe,EAAE,EAFd;AAGH,MAAA,QAAQ,EAAE,EAHP;AAIH,MAAA,EAAE,EAAE;AAJD,KAAP;AAMH,GAZU;AAaX,EAAA,OAAO,EAAE,mBAAW;AAChB,QAAI,EAAC,GAAa,YAAY,CAAC,OAAb,CAAqB,QAArB,CAAlB;AACA,QAAI,IAAG,GAAW,IAAlB;AACA,IAAA,KAAK,CAAC,GAAN,CAAU,qCAAqC,EAA/C,EAAmD;AAAE,MAAA,OAAO,EAAE;AAAC,yBAAiB,YAAY,YAAY,CAAC,OAAb,CAAqB,OAArB;AAA9B;AAAX,KAAnD,EACC,IADD,CACM,UAAA,GAAE,EAAK;AACT,MAAA,IAAI,CAAC,QAAL,GAA0B,GAAG,CAAC,IAAJ,CAAS,SAAT,CAAmB,KAAnB,CAAyB,CAAzB,EAA2B,EAA3B,EAA+B,KAA/B,CAAqC,GAArC,EAA0C,OAA1C,GAAoD,IAApD,CAAyD,GAAzD,CAA1B;AACA,MAAA,IAAI,CAAC,OAAL,GAA0B,GAAG,CAAC,IAAJ,CAAS,OAAnC;AACA,MAAA,IAAI,CAAC,eAAL,GAA0B,GAAG,CAAC,IAAJ,CAAS,QAAT,CAAkB,MAAlB,CAAyB,CAAzB,EAA4B,WAA5B,KAA4C,GAAG,CAAC,IAAJ,CAAS,QAAT,CAAkB,KAAlB,CAAwB,CAAxB,CAAtE;AACA,MAAA,IAAI,CAAC,EAAL,GAA0B,GAAG,CAAC,IAAJ,CAAS,EAAnC;AACH,KAND,EAOC,KAPD,CAOO,UAAC,KAAD,EAAU;AAAE,MAAA,OAAO,CAAC,GAAR,CAAY,KAAZ;AAClB,KARD;AASH,GAzBU;AA0BX,EAAA,OAAO,EAAE;AACL,IAAA,UADK,wBACQ;AACT,MAAA,YAAY,CAAC,KAAb;AACA,MAAA,MAAM,CAAC,IAAP,CAAY;AAAE,QAAA,IAAG,EAAI;AAAT,OAAZ;AACH,KAJI;AAKL,IAAA,eALK,2BAKW,CALX,EAKc;AACf,UAAI,EAAC,GAAI,CAAT;AACA,UAAI,mBAAkB,GAAI,OAAO,CAAC,+CAAD,CAAjC;;AACA,UAAI,mBAAkB,IAAK,IAA3B,EAAiC;AAC7B,QAAA,KAAK,CAAC,MAAN,CAAa,qCAAqC,EAAlD,EAAsD;AAAC,UAAA,OAAO,EAAE;AAAE,6BAAiB,YAAY,YAAY,CAAC,OAAb,CAAqB,OAArB;AAA/B;AAAV,SAAtD,EACC,IADD,CACM,UAAC,GAAD,EAAQ;AACV,UAAA,OAAO,CAAC,GAAR,CAAY,GAAZ;AACA,UAAA,KAAK,CAAC,gDAAD,CAAL;AACA,UAAA,MAAM,CAAC,OAAP,CAAe,4BAAf;AACH,SALD,EAMC,KAND,CAMO,UAAC,KAAD,EAAW;AACd,UAAA,OAAO,CAAC,GAAR,CAAY,KAAZ;AACH,SARD;AASJ,OAVA,MAUO;AACH;AACJ;AACH,KArBI;AAsBL,IAAA,cAtBK,4BAsBY;AACb,MAAA,MAAM,CAAC,OAAP,CAAe,wCAAf;AACH,KAxBI;AAyBL,IAAA,WAzBK,yBAyBS;AACV,MAAA,MAAM,CAAC,OAAP,CAAe,qCAAf;AACJ;AA3BK;AA1BE,CAAf","sourcesContent":["<template>\n    <main class=\"container\">    \n        <div class=\"row justify-content-center\">\n            <div class=\"col-10\">\n                 <!-- div contenant le titre -->\n                <div class=\"col-12\">\n                    <h1 class=\"my-2 btn btn-block btn-info font-weight-bold\" style=\"cursor:default\">Vous consultez vote compte</h1>\n                    <Home></Home>\n                </div>\n                <section id=\"filPrincipal\" class=\"row\">\n                    <div class=\"col-12\">\n                         <!-- bloc utilisateur -->\n                        <div class=\"card bg-light my-3 class=center-block\" style=\"float:none;\">\n                            <div class=\"card-header\">\n                                <div class=\"row justify-content-around\">\n                                    <p class=\"m-1\"> Bonjour {{ nameCurrentUser }} ! </p>\n                                    <button @click=\"localClear\"> <img src=\"../assets/signout.svg\" alt=\"sign-out\" style=\"width:35px\"/> </button>\n                                </div>\n                            </div>\n                            <div class=\"card-body text-center\">\n                                <div class=\"dropdown text-center\">\n                                    <p>Membre depuis le {{ creation }}</p>\n                                </div>\n                            </div>\n                            <div class=\"card-body mx-auto\">\n                                <div class=\"btn-info rounded p-3\" style=\"cursor:default\"><button class=\"rounded p-2\" style=\"cursor:default\"><span class=\"m-3 font-weight-bold\">Depuis cette page vous pouvez supprimer votre compte. La suppression de votre compte entrainera également la suppression de tous les commentaires et les images que vous avez posté.</span></button></div>\n                            </div>\n                            <div class=\"card-body mx-auto\">\n                                <div class=\"btn-danger rounded p-3\" style=\"cursor:default\"><button @click=\"deleteMyAccount(id)\" class=\"rounded p-2\"><span class=\"m-3 font-weight-bold\">SUPPRIMER VOTRE COMPTE</span><img src=\"../assets/trash.svg\" alt=\"trash\" style=\"width:25px\"></button></div>\n                            </div>\n                        </div> \n                    </div>  \n                </section>\n            </div>\n        </div>\n    </main>\n</template>\n\n\n<script>\nimport Home from \"../components/Home\";\nimport axios from \"axios\";\nimport router from \"../router\";\nimport \"../main.css\";\n\nexport default {\n    name: \"Compte\",\n    components: {\n      Home\n    },\n    data() {\n        return {\n            isAdmin: false,\n            nameCurrentUser: \"\",\n            creation: \"\",\n            id: \"\"\n        }\n    },\n    created: function() {        \n        let id          = localStorage.getItem('userId');\n        let self        = this;\n        axios.get(\"http://localhost:3000/api/users/\" + id, { headers: {\"Authorization\": \"Bearer \" + localStorage.getItem(\"token\")} })\n        .then(res => {  \n            self.creation           = res.data.createdAt.slice(0,10).split(\"-\").reverse().join(\".\");\n            self.isAdmin            = res.data.isAdmin;\n            self.nameCurrentUser    = res.data.userName.charAt(0).toUpperCase() + res.data.userName.slice(1);\n            self.id                 = res.data.id     \n        })\n        .catch((error)=> { console.log(error) \n        });    \n    },\n    methods: {\n        localClear() {\n            localStorage.clear();\n            router.push({ path : \"/\" });\n        },\n        deleteMyAccount(n) {\n            let id = n;\n            let confirmUserDeletion = confirm(\"voulez-vous vraiment supprimer votre compte ?\");\n            if (confirmUserDeletion == true) {\n                axios.delete(\"http://localhost:3000/api/users/\" + id, {headers: { \"Authorization\": \"Bearer \" + localStorage.getItem(\"token\") },})\n                .then((res)=> {\n                    console.log(res);\n                    alert('Cliquez sur ok et l\\'utilisateur sera supprimé');\n                    router.replace(\"http://localhost:8080/api/\")\n                })\n                .catch((error) => { \n                    console.log(error)\n                })\n            } else {\n                return \n            }\n        },\n        toCommentsList() {\n            router.replace(\"http://localhost:8080/api/CommentsList\")\n        },\n        toUsersList() {\n            router.replace(\"http://localhost:8080/api/UsersList\")\n        }\n    }\n}\n</script>"],"sourceRoot":""}]}