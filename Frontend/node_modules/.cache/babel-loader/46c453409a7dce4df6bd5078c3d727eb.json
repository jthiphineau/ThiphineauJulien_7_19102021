{"remainingRequest":"/Users/t.j/OPCR/Projet7/Frontend/node_modules/babel-loader/lib/index.js!/Users/t.j/OPCR/Projet7/Frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/t.j/OPCR/Projet7/Frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/t.j/OPCR/Projet7/Frontend/src/views/CreateComment.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/t.j/OPCR/Projet7/Frontend/src/views/CreateComment.vue","mtime":1610031143000},{"path":"/Users/t.j/OPCR/Projet7/Frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635943526508},{"path":"/Users/t.j/OPCR/Projet7/Frontend/node_modules/babel-loader/lib/index.js","mtime":1635943529871},{"path":"/Users/t.j/OPCR/Projet7/Frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635943526508},{"path":"/Users/t.j/OPCR/Projet7/Frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1635943530684}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi4vcm91dGVyIjsKaW1wb3J0ICIuLi9tYWluLmNzcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ3JlYXRlQ29tbWVudCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzQWRtaW46IGZhbHNlLAogICAgICBjdXJyZW50VXNlcklkOiAiIiwKICAgICAgbmV3Q29tbWVudDogIiIsCiAgICAgIGNvbW1lbnRzOiBbXSwKICAgICAgaXNJbnZhbGlkOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNhbGxOYW1lOiBmdW5jdGlvbiBjYWxsTmFtZSgpIHsKICAgICAgdmFyIG5hbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlck5hbWUnKTsKICAgICAgcmV0dXJuIG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpOwogICAgfSwKICAgIGNhbGxOdW1iZXI6IGZ1bmN0aW9uIGNhbGxOdW1iZXIoKSB7CiAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnTWVzc2FnZUlkJyk7CiAgICB9LAogICAgc2VuZDogZnVuY3Rpb24gc2VuZCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICghdGhpcy5uZXdDb21tZW50IHx8ICFsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlcklkIikgfHwgIWxvY2FsU3RvcmFnZS5nZXRJdGVtKCJNZXNzYWdlSWQiIHx8IHRoaXMubmV3Q29tbWVudC5sZW1ndGggPiAxNTAwKSkgewogICAgICAgIHRoaXMuaXNJbnZhbGlkID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgVXNlcklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJJZCIpOwogICAgICAgIHZhciBjb21tZW50ID0gdGhpcy5uZXdDb21tZW50LnRvU3RyaW5nKCk7CiAgICAgICAgdmFyIE1lc3NhZ2VJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJNZXNzYWdlSWQiKTsKICAgICAgICBheGlvcy5wb3N0KCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2NvbW1lbnRzLyIsIHsKICAgICAgICAgIFVzZXJJZDogVXNlcklkLAogICAgICAgICAgY29tbWVudDogY29tbWVudCwKICAgICAgICAgIE1lc3NhZ2VJZDogTWVzc2FnZUlkCiAgICAgICAgfSwgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAiQXV0aG9yaXphdGlvbiI6ICJCZWFyZXIgIiArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpcy5Vc2VySWQgPSAiIjsKICAgICAgICAgIF90aGlzLm5ld01lc3NhZ2UgPSAiIjsKICAgICAgICAgIGFsZXJ0KCdDb21tZW50YWlyZSBQb3N0w6khJyk7CiAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIHBhdGg6ICdDb21tZW50JwogICAgICAgICAgfSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/t.j/OPCR/Projet7/Frontend/src/views/CreateComment.vue"],"names":[],"mappings":";;;AA6BA,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,MAAP,MAAmB,WAAnB;AACA,OAAO,aAAP;AAEA,eAAe;AACX,EAAA,IAAI,EAAE,eADK;AAEV,EAAA,IAFU,kBAEH;AACJ,WAAO;AACH,MAAA,OAAO,EAAE,KADN;AAEH,MAAA,aAAa,EAAE,EAFZ;AAGH,MAAA,UAAU,EAAE,EAHT;AAIH,MAAA,QAAQ,EAAE,EAJP;AAKH,MAAA,SAAS,EAAE;AALR,KAAP;AAOH,GAVU;AAWX,EAAA,OAAO,EAAE;AACL,IAAA,QADK,sBACM;AACP,UAAI,IAAG,GAAI,YAAY,CAAC,OAAb,CAAqB,UAArB,CAAX;AACA,aAAO,IAAI,CAAC,MAAL,CAAY,CAAZ,EAAe,WAAf,KAA+B,IAAI,CAAC,KAAL,CAAW,CAAX,CAAtC;AACH,KAJI;AAKL,IAAA,UALK,wBAKQ;AACT,aAAO,YAAY,CAAC,OAAb,CAAqB,WAArB,CAAP;AACH,KAPI;AAQL,IAAA,IARK,kBAQE;AAAA;;AAEH,UAAI,CAAC,KAAK,UAAN,IAAoB,CAAC,YAAY,CAAC,OAAb,CAAqB,QAArB,CAArB,IAAuD,CAAC,YAAY,CAAC,OAAb,CAAqB,eAAe,KAAK,UAAL,CAAgB,MAAhB,GAAyB,IAA7D,CAA5D,EAAgI;AAC5H,aAAK,SAAL,GAAiB,IAAjB;AACJ,OAFA,MAEO;AAEH,YAAI,MAAK,GAAS,YAAY,CAAC,OAAb,CAAqB,QAArB,CAAlB;AACA,YAAI,OAAM,GAAQ,KAAK,UAAL,CAAgB,QAAhB,EAAlB;AACA,YAAI,SAAQ,GAAM,YAAY,CAAC,OAAb,CAAqB,WAArB,CAAlB;AAEA,QAAA,KAAK,CAAC,IAAN,CAAW,qCAAX,EAAkD;AAAE,UAAA,MAAM,EAAN,MAAF;AAAU,UAAA,OAAO,EAAP,OAAV;AAAmB,UAAA,SAAQ,EAAR;AAAnB,SAAlD,EAAmF;AAAE,UAAA,OAAO,EAAE;AAAE,6BAAgB,YAAY,YAAY,CAAC,OAAb,CAAqB,OAArB;AAA9B;AAAX,SAAnF,EACC,IADD,CACM,YAAK;AACP,UAAA,KAAI,CAAC,MAAL,GAAc,EAAd;AACA,UAAA,KAAI,CAAC,UAAL,GAAkB,EAAlB;AAEA,UAAA,KAAK,CAAC,oBAAD,CAAL;AACA,UAAA,MAAM,CAAC,IAAP,CAAY;AAAC,YAAA,IAAG,EAAI;AAAR,WAAZ;AAEH,SARD,EASC,KATD,CASO,UAAC,KAAD,EAAS;AACZ,UAAA,OAAO,CAAC,GAAR,CAAY,KAAZ;AACH,SAXD;AAYJ;AACJ;AA/BK;AAXE,CAAf","sourcesContent":["  <template>\n    <main class=\"container\">\n         <!-- un seul bloc pour la creation de commentaire -->\n        <section class=\"row card bg-light m-5 p-3\">\n            <form enctype=\"multipart/form-data\">\n                <div class=\"header\">\n                    <h1  class=\"btn btn-dark\" style=\"cursor:default\">\n                        {{ callName() }} vous commentez la publication numéro <span class=\"badge font-weight-bold badge-light\"> {{ callNumber() }}</span>\n                    </h1>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-12 justify-content-center form-group\">\n                        <label for=\"newComment\">À vos claviers...</label>\n                        <textarea v-on:keydown=\"isInvalid = false\"  class=\"form-control\" v-model=\"newComment\" id=\"newComment\" name=\"comment\" rows=\"8\" placeholder=\" Saisissez votre commentaire ici. (1500 caractères max) \"></textarea>\n                    </div>\n                </div>\n                <div class=\"footer col-10 mx-auto align-content-center\">\n                    <div><button type=\"submit\" @click.prevent=\"send()\" class=\"btn btn-dark font=weight-bold btn-block m-2 p-2\">Valider</button></div>\n                    <router-link to=\"/Stream\"> <div> <a class=\"btn btn-danger btn-block m-2 p-2\">Annuler/Retour</a></div></router-link> \n                </div>\n                <div v-show=\"isInvalid\" class=\"invalidBox m-2\" key=\"invalid\">\n                    <p> Vous devez renseigner la case \" Saisissez votre commentaire ici en respectant les instructions (1500 caractères max) \"</p>\n                </div>  \n            </form>\n        </section>\n    </main>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport router from \"../router\";\nimport \"../main.css\";\n\nexport default {\n    name: \"CreateComment\",\n     data() {\n        return {\n            isAdmin: false,\n            currentUserId: \"\", \n            newComment: \"\",\n            comments: [],\n            isInvalid: false\n        }\n    },\n    methods: {\n        callName() {\n            let name = localStorage.getItem('userName');\n            return name.charAt(0).toUpperCase() + name.slice(1);\n        },\n        callNumber() {\n            return localStorage.getItem('MessageId')\n        },\n        send() {\n\n            if (!this.newComment || !localStorage.getItem(\"userId\") || !localStorage.getItem(\"MessageId\" || this.newComment.lemgth > 1500)) {\n                this.isInvalid = true;\n            } else {\n\n                let UserId      = localStorage.getItem(\"userId\");\n                let comment     = this.newComment.toString();\n                let MessageId   = localStorage.getItem(\"MessageId\");\n\n                axios.post(\"http://localhost:3000/api/comments/\", { UserId, comment, MessageId } , { headers: { \"Authorization\":\"Bearer \" + localStorage.getItem(\"token\")}})\n                .then(()=> {\n                    this.UserId = \"\"\n                    this.newMessage = \"\"\n            \n                    alert('Commentaire Posté!')\n                    router.push({path : 'Comment'})\n                    \n                })\n                .catch((error)=>{\n                    console.log(error);\n                })\n            }\n        }\n    }\n}\n</script>"],"sourceRoot":""}]}