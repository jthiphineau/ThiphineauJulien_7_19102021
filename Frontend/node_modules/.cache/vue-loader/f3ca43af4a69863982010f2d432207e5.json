{"remainingRequest":"/Users/t.j/OPCR/projet7/Frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/t.j/OPCR/projet7/Frontend/src/views/Create.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/t.j/OPCR/projet7/Frontend/src/views/Create.vue","mtime":1610031143000},{"path":"/Users/t.j/OPCR/projet7/Frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635943526508},{"path":"/Users/t.j/OPCR/projet7/Frontend/node_modules/babel-loader/lib/index.js","mtime":1635943529871},{"path":"/Users/t.j/OPCR/projet7/Frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635943526508},{"path":"/Users/t.j/OPCR/projet7/Frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1635943530684}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyIKaW1wb3J0IHJvdXRlciBmcm9tICIuLi9yb3V0ZXIiOwppbXBvcnQgIi4uL21haW4uY3NzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJDcmVhdGUiLAogICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaXNBZG1pbjogZmFsc2UsCiAgICAgICAgICAgIG5ld0ltYWdlOiAiIiwKICAgICAgICAgICAgY3VycmVudFVzZXJJZDogIiIsIAogICAgICAgICAgICBuZXdNZXNzYWdlOiAiIiwKICAgICAgICAgICAgZmlsZTogbnVsbCwKICAgICAgICAgICAgbWVzc2FnZXM6IFtdLAogICAgICAgICAgICBpc0ludmFsaWQ6IGZhbHNlCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBjYWxsTmFtZSgpIHsKICAgICAgICAgICAgbGV0IG5hbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlck5hbWUnKTsKICAgICAgICAgICAgcmV0dXJuIG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpOwogICAgICAgIH0sCiAgICAgICAgc2VsZWN0RmlsZSgpIHsKICAgICAgICAgICAgdGhpcy5maWxlID0gdGhpcy4kcmVmcy5maWxlLmZpbGVzWzBdOwogICAgICAgICAgICB0aGlzLm5ld0ltYWdlID0gVVJMLmNyZWF0ZU9iamVjdFVSTCh0aGlzLmZpbGUpCiAgICAgICAgfSwKICAgICAgICBzZW5kKCkgewogICAgICAgICAgICBpZiAoICF0aGlzLmZpbGUgfHwgIWxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyTmFtZScpIHx8ICF0aGlzLm5ld01lc3NhZ2UgfHwgdGhpcy5uZXdNZXNzYWdlID4gMTUwMCApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmlzSW52YWxpZCA9IHRydWU7CgogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJsaWduZSA2OSIgKyB0aGlzLmZpbGUpCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpCiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImltYWdlIiwgdGhpcy5maWxlKQogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJVc2VySWQiLCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJykpCiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoIm1lc3NhZ2UiLCB0aGlzLm5ld01lc3NhZ2UudG9TdHJpbmcoKSkKICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvbWVzc2FnZXMvIiwgZm9ybURhdGEsIHsgaGVhZGVyczogeyAiQXV0aG9yaXphdGlvbiI6IkJlYXJlciAiICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIil9fSkKICAgICAgICAgICAgICAgIC50aGVuKCgpPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuVXNlcklkID0gIiIKICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld01lc3NhZ2UgPSAiIgogICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsZSA9IG51bGwKICAgICAgICAgICAgICAgICAgICBhbGVydCgncHVibGljYXRpb24gcsOpdXNzaWUhJykKICAgICAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCh7cGF0aCA6ICdTdHJlYW0nfSkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKT0+ewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["/Users/t.j/OPCR/projet7/Frontend/src/views/Create.vue"],"names":[],"mappings":";AAuCA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACxB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC9B,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;AAEpB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACX,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;KACb,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QACJ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;YACH,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;YACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YACjB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YACd,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACnB;IACJ,CAAC;IACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;YACP,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3C,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACvD,CAAC;QACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;YACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACpC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACjD,CAAC;QACD,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;YACH,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE;oBAC7F,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;;oBAErB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC1C,EAAE,CAAC,CAAC,CAAC,EAAE;gBACH,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC9B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAClC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACxD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACrD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACpI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;oBACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;oBACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;oBACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;oBACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC5B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACjC,CAAC;gBACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACtB,CAAC;YACL;QACJ;IACJ;AACJ","file":"/Users/t.j/OPCR/projet7/Frontend/src/views/Create.vue","sourceRoot":"","sourcesContent":["  <template>\n    <main class=\"container\"> \n        <!-- Un seul bloc pour le contenu creation message -->\n        <section class=\"row card bg-light m-5 p-3\">\n            <form enctype=\"multipart/form-data\">\n                <div class=\"header p-1\">\n                    <h1  class=\"btn btn-dark\" style=\"cursor:default\">\n                        {{ callName() }} vous allez créer une nouvelle publication    <img src=\"../assets/send.svg\" class=\"m-1\" alt=\"send\" style=\"width:1rem\"/>  \n                    </h1>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-12 justify-content-center form-group\">\n                        <label for=\"newMessage\">Donnez des détails sur votre publication.</label>\n                        <textarea v-on:keydown=\"isInvalid = false\" class=\"form-control\" v-model=\"newMessage\" id=\"newMessage\" name=\"message\" rows=\"8\" placeholder=\"Saisissez votre message. (1500 caractères max)\"></textarea>\n                    </div>\n                    <div class=\"col-12 justify-content-center text-center\">\n                        <img :src=\"newImage\" class=\"w-50 rounded\">\n                        <p class=\"text-center\"> un aperçu de votre post apparaîtra ici. Formats acceptés: jpg, jpeg, png et gif.</p>\n                    </div>\n                    <div class=\"col-12 justify-content-center\">\n                        <div class=\"form-group justify-content-center\">\n                            <label for=\"File\">Choisir une nouvelle photo</label>\n                            <input @change=\"selectFile()\" type=\"file\" ref=\"file\" name=\"image\" class=\"form-control-file\" id=\"File\" accept=\".jpg, .jpeg, .gif, .png\">\n                        </div>\n                    </div>\n                </div>\n                <div class=\"footer col-10 mx-auto align-content-center\">\n                    <div><button type=\"submit\" @click.prevent=\"send()\" class=\"btn btn-dark btn-block m-2 p-2\">Valider</button></div>\n                    <router-link to=\"/Stream\"> <div> <a class=\"btn btn-danger btn-block m-2 p-2\">Annuler/Retour</a></div></router-link> \n                </div>\n                 <div v-show=\"isInvalid\" class=\"invalidBox m-2\" key=\"invalid\">\n                    <p>Vous ne pouvez pas envoyer de post sans contenu (vous devez inclure texte et image). Votre message doit faire moins de 1500 caractères.</p>        \n                </div>  \n            </form>\n        </section>\n    </main>\n</template>\n\n<script>\nimport axios from \"axios\"\nimport router from \"../router\";\nimport \"../main.css\";\n\nexport default {\n    name: \"Create\",\n     data() {\n        return {\n            isAdmin: false,\n            newImage: \"\",\n            currentUserId: \"\", \n            newMessage: \"\",\n            file: null,\n            messages: [],\n            isInvalid: false\n        }\n    },\n    methods: {\n        callName() {\n            let name = localStorage.getItem('userName');\n            return name.charAt(0).toUpperCase() + name.slice(1);\n        },\n        selectFile() {\n            this.file = this.$refs.file.files[0];\n            this.newImage = URL.createObjectURL(this.file)\n        },\n        send() {\n            if ( !this.file || !localStorage.getItem('userName') || !this.newMessage || this.newMessage > 1500 ) {\n                    this.isInvalid = true;\n\n                    console.log(\"ligne 69\" + this.file)\n            } else {\n                const formData = new FormData()\n                formData.append(\"image\", this.file)\n                formData.append(\"UserId\", localStorage.getItem('userId'))\n                formData.append(\"message\", this.newMessage.toString())\n                axios.post(\"http://localhost:3000/api/messages/\", formData, { headers: { \"Authorization\":\"Bearer \" + localStorage.getItem(\"token\")}})\n                .then(()=> {\n                    this.UserId = \"\"\n                    this.newMessage = \"\"\n                    this.file = null\n                    alert('publication réussie!')\n                    router.push({path : 'Stream'})\n                })\n                .catch((error)=>{\n                    console.log(error);\n                })\n            }\n        }\n    }\n}\n</script>"]}]}